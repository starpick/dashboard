-- +---------------------------------------------------------
-- | MODEL       : starpickDBdesign
-- | AUTHOR      : loneop
-- | GENERATED BY: Open System Architect
-- +---------------------------------------------------------
-- | WARNING     : Review before execution
-- +---------------------------------------------------------

-- +---------------------------------------------------------
-- | CREATE
-- +---------------------------------------------------------
CREATE TABLE bookmark
(
  bookmark_id integer NOT NULL,
  PRIMARY KEY (bookmark_id)
);
COMMENT ON TABLE bookmark IS '??';
CREATE TABLE pic_ajust
(
  dislikes integer NOT NULL,
  likes integer NOT NULL,
  ajust_id integer NOT NULL
);
COMMENT ON TABLE pic_ajust IS '????';
CREATE TABLE tag
(
  cloth_brand character varying(200) NOT NULL,
  cloth_name character varying(50) NOT NULL,
  cloth_intro character varying(200) NOT NULL,
  price double precision NOT NULL,
  link character varying(300),
  tag_id integer NOT NULL,
  PRIMARY KEY (cloth_brand,tag_id)
);
CREATE TABLE pictures
(
  idolName character varying(50) NOT NULL,
  pic_introduction character varying(1000) NOT NULL,
  note character varying(1000) NOT NULL,
  picture character varying(200) NOT NULL,
  picId integer NOT NULL,
  ajust_id integer NOT NULL,
  PRIMARY KEY (picId)
);
COMMENT ON TABLE pictures IS '???';
CREATE TABLE comment
(
  comment_id integer NOT NULL,
  content character varying(1000) NOT NULL,
  picId integer NOT NULL,
  PRIMARY KEY (comment_id)
);
CREATE INDEX idxcomment1 ON comment
(
  picId
);

CREATE TABLE userInfo
(
  head bit varying,
  introduction character(300),
  userInfo_id integer NOT NULL,
  PRIMARY KEY (userInfo_id)
);
COMMENT ON TABLE userInfo IS '????????????????';
CREATE TABLE user
(
  userName character varying(100) NOT NULL,
  phoneNo character(11) NOT NULL,
  password character varying(100) NOT NULL,
  user_ID integer NOT NULL,
  userInfo_id integer NOT NULL,
  PRIMARY KEY (phoneNo,user_ID)
);
COMMENT ON TABLE user IS '??????';
CREATE TABLE follow
(
  follow_id integer NOT NULL,
  follow_list text NOT NULL,
  user_ID integer NOT NULL,
  PRIMARY KEY (follow_id)
);
CREATE TABLE followers
(
  folloer_id integer NOT NULL,
  follower_list text NOT NULL,
  user_ID integer NOT NULL,
  PRIMARY KEY (folloer_id)
);
ALTER TABLE user ADD CONSTRAINT moreInfo
  FOREIGN KEY ( userInfo_id )
   REFERENCES userInfo ( userInfo_id )
    NOT DEFERRABLE;
ALTER TABLE user ADD CONSTRAINT user_publish_pic
  FOREIGN KEY (  )
   REFERENCES pictures (  )
    NOT DEFERRABLE;
ALTER TABLE pictures ADD CONSTRAINT tag_of_pic
  FOREIGN KEY (  )
   REFERENCES tag (  )
    NOT DEFERRABLE;
ALTER TABLE user ADD CONSTRAINT user_make_comment
  FOREIGN KEY (  )
   REFERENCES comment (  )
    NOT DEFERRABLE;
ALTER TABLE comment ADD CONSTRAINT comments_of_pic
  FOREIGN KEY ( picId )
   REFERENCES pictures ( picId )
    NOT DEFERRABLE;
ALTER TABLE user ADD CONSTRAINT user_bookmark
  FOREIGN KEY (  )
   REFERENCES bookmark (  )
    NOT DEFERRABLE;
CREATE TABLE bookmark_pic
(
  bookmark_id integer NOT NULL,
  picId integer NOT NULL,
  PRIMARY KEY (bookmark_id,picId)
);
ALTER TABLE bookmark_pic ADD CONSTRAINT bookmark_pic
  FOREIGN KEY ( picId )
   REFERENCES pictures ( picId )
    NOT DEFERRABLE;
ALTER TABLE pictures ADD CONSTRAINT pic_ajusting
  FOREIGN KEY ( ajust_id )
   REFERENCES pic_ajust ( ajust_id )
    NOT DEFERRABLE;
ALTER TABLE follow ADD CONSTRAINT following
  FOREIGN KEY ( user_ID )
   REFERENCES user ( user_ID )
    NOT DEFERRABLE;
ALTER TABLE followers ADD CONSTRAINT followed
  FOREIGN KEY ( user_ID )
   REFERENCES user ( user_ID )
    NOT DEFERRABLE;
